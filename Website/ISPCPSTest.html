<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CPS Test</title>
    <link rel="stylesheet" href="./ISPstyle.css">
    <style>
      .container {
	  position: relative;
	  width: 100%;
	  padding-top: 3%;
	  text-align: center;
      }

      .CPSiframe {
	  height: 700px;
	  width: 80%;
      }

      .title {
	  font-size: 50px;
      }

      .button {
	  align-self: center;
	  font-size: 50px;
	  margin-left: 20%;   margin-right: 20%;
	  width: 60%;
	  height: 400px;
      }

      p {
	  text-align: left;
	  font-size: 30px;
      }

      .labelBox {
	  width: 200px;
	  margin: auto;
      }

    </style>
  </head>
  <body>

    <div class="container">
      <h2 class="title">Clicks Per Second Test</h2>
      <iframe class="CPSiframe" src="https://cpstest.org/" title="test"></iframe>
    </div>
    <br>
    <br>
    <br>
    <script>
      var seconds = 0;
      var clicks = 0;
      let timerInterval;
      
      function startTest(){
	  timerInterval = setInterval(updateTimer, 10);
	  document.getElementById('startButton').style.display = 'none';
	  document.getElementById('finalCPS').innerHTML = 'CPS:'
	  document.getElementById('clickButton').hidden = false;
      }

      function updateTimer(){
	  seconds += 1;
	  document.getElementById('timeDisplay').innerHTML = 'Time: ' + (seconds / 100);
	  if(seconds === 500){
	      clearInterval(timerInterval);
	      document.getElementById('finalCPS').innerHTML = 'CPS: ' + (clicks / (seconds / 100));
	      resetTest();
	  }
      }

      function resetTest(){
	  seconds = 0;
	  clicks = 0;
	  document.getElementById('clickButton').innerHTML = 'Click';
	  document.getElementById('startButton').style.display = 'block';
	  document.getElementById('clickButton').hidden = true;
      }

    </script>
    
    <button class="button" id="startButton" type="button"
	    onclick="startTest();">
      Click to start</button>
    
    <button hidden class="button" id="clickButton" type="button"
	    onclick="clicks += 1;document.getElementById('clickButton').innerHTML=clicks">
      Click</button>

    <div class="labelBox">
      <p id="timeDisplay">Time:</p>
      <p id="finalCPS">CPS:</p>
    </div>

  </body>
</html> 
